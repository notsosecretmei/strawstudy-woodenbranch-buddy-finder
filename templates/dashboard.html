<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - Study Buddy Finder</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">

    <!-- Greeting -->
    <h1>Welcome, {{ user.name }}</h1>
    <a class="logout" href="{{ url_for('logout') }}">Logout</a>

    <!-- Search Feature -->
    <h2>Search for a Study Buddy</h2>
    <form method="POST" action="{{ url_for('dashboard') }}">
      <input type="text" name="search" placeholder="Enter username">
      <button type="submit">Search</button>
    </form>

    <!-- Search Results -->
    {% if search_results %}
      <h3>Search Results:</h3>
      <ul>
        {% for u in search_results %}
          <li>
            {{ u.name }} 
            <a href="{{ url_for('send_request', receiver_id=u.id) }}">Send Request</a>
          </li>
        {% endfor %}
      </ul>
    {% endif %}

    <!-- Random Buddy Button -->
    <h2>Or Find a Random Buddy</h2>
    <a class="random-btn" href="{{ url_for('find_random') }}">Find Random Buddy</a>

    <!-- Incoming Requests -->
    <h2>Incoming Requests</h2>
    {% if incoming_requests %}
      <ul>
        {% for r in incoming_requests %}
          <li>
            {{ r.sender_id }} sent you a request
            <a href="{{ url_for('accept_request', request_id=r.id) }}">Accept</a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No incoming requests yet.</p>
    {% endif %}

    <!-- Accepted Study Buddies -->
    <h2>Accepted Study Buddies</h2>
    {% if accepted_users %}
      <ul>
        {% for buddy in accepted_users %}
          <li>
            {{ buddy.name }} <br>
            Instagram: {{ buddy.instagram }} <br>
            Discord: {{ buddy.discord }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You don't have any accepted buddies yet.</p>
    {% endif %}

  </div>
</body>
</html>
